<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Builds standardized, modular shiny dashboard ready for dockerisation with IOM style • graveler</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Open_Sans-0.4.9/font.css" rel="stylesheet">
<link href="deps/Fira_Mono-0.4.9/font.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Builds standardized, modular shiny dashboard ready for dockerisation with IOM style">
<meta name="description" content="Wrapper for {golem} that automates dashboard app contenerisation.">
<meta property="og:description" content="Wrapper for {golem} that automates dashboard app contenerisation.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">graveler</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.75.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/learn_from_examples.html">Learning from Examples</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/iom/graveler/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="graveler">{graveler}<a class="anchor" aria-label="anchor" href="#graveler"></a>
</h1></div>
<blockquote>
<p>Build standardized, branded, modular dashboards to deploy as Docker Images in Azure</p>
</blockquote>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>This <a href="https://github.com/ghcarlalan/graveler" class="external-link">{graveler} fork</a> is an <strong>Rstudio Project Template</strong> and a wrapper for <a href="https://engineering-shiny.org/" class="external-link">{golem}</a>, <a href="https://rstudio.github.io/shinydashboard/index.html" class="external-link">{shinyDashboard}</a>, <a href="https://thinkr-open.github.io/fusen" class="external-link">{fusen}</a>, and <a href="https://iom.github.io/iomshiny/" class="external-link">{iomshiny}</a> packages.</p>
<p>At a high level, {golem} turns your shiny dashboards into a package framework and allows you to build and deploy them almost exactly as you would for an R package. This allows for better documentation, testing, robustness, etc. {graveler} abstracts away its technical side and set defaults for the development workflow of IOM dashboards.</p>
<p>You shall then be able to create an initial working dashboard in a few minutes!</p>
</div>
<div class="section level2">
<h2 id="dashboard-in-shiny">Dashboard in Shiny<a class="anchor" aria-label="anchor" href="#dashboard-in-shiny"></a>
</h2>
<p>Developing dashboards in shiny, rather than with a <em>“point and click”</em> software, requires some familiarity with R programming but also comes with numerous advantages:</p>
<ul>
<li><p><strong>Customizability within standards</strong>: Shiny offers a high level of flexibility and customization, allowing you to design interactive dashboards with tailored visualizations, layouts, and user interfaces (including for the instance <a href="https://fontawesome.com/icons/categories/humanitarian" class="external-link">humanitarian icons</a>). This comes also with amazing plotting capacity leveraging <a href="https://ggplot2.tidyverse.org/" class="external-link">ggplot2</a>. At the same time, as soon as the standard css (with <a href="https://iom.github.io/iomshiny/" class="external-link">{iomshiny}</a>) is used, the look and feel will remain fully consistent.</p></li>
<li><p><strong>Seamless Integration with R</strong>: Shiny allows you to leverage the power and flexibility of the R language and its extensive ecosystem of packages for data analysis, visualization, and statistical modeling.</p></li>
<li><p><strong>Responsiveness on mobile devices</strong>: Shiny Dashboard are built per default with bootstrap, allowing for User Interface Responsiveness, meaning the resulting product will be legible on smartphones for senior managers in a hurry.</p></li>
<li><p><strong>Advanced Analytics</strong>: With R’s extensive statistical capabilities, Shiny enables the integration of complex statistical models and advanced analytics directly into your dashboard.</p></li>
<li><p><strong>Reproducibility and Transparency</strong>: Since Shiny dashboards are built using R code, they are inherently reproducible and transparent, making it easier to share and validate analysis methods and results.</p></li>
<li><p><strong>Publication and Maintenance</strong>: IOM can deploy docker images within its Azure infrastructure, which is ready to be leveraged. There are even ways to keep your dashboard behind authentication if need arise. As Shiny Dashboard are based on scripts, there are easier to maintain and monitor over time, as you can keep them under version control in github.</p></li>
<li><p><strong>Open-Source Community</strong>: Shiny benefits from a large and active open-source community, which provides a wealth of resources, packages, and support.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="why-bother-with-graveler">Why Bother with {graveler}?<a class="anchor" aria-label="anchor" href="#why-bother-with-graveler"></a>
</h2>
<p>As any development team grows larger, it is important to standardize code to avoid the dreaded event in which you are handed a project that is coded so differently from your usual workflow that you either have to spend hours refactoring and / or rebuilding from scratch. Additionally, {shiny} itself can be complicated to spin up at times for developers who are not familiar with its syntax.</p>
<p><strong>{graveler} allows you to create standard, scale-able, and documented code so you can focus on actual dashboard element creation instead of spending time getting the various back-end pieces to talk to each other.</strong></p>
<blockquote>
<p>Note that this package is not like {shinyWidgets} or other shiny element packages. This is a <strong>dashboard skeleton creator</strong> that allows you and your team to all start from the same page (some might say fluidPage) so your dashboards all have the same feel, layout, and backend creation.</p>
</blockquote>
</div>
<div class="section level2">
<h2 id="get-started">Get Started<a class="anchor" aria-label="anchor" href="#get-started"></a>
</h2>
<div class="section level3">
<h3 id="package-installation">Package Installation<a class="anchor" aria-label="anchor" href="#package-installation"></a>
</h3>
<p>If you are on windows, you will need to install <a href="https://cran.r-project.org/bin/windows/Rtools/" class="external-link">Rtools</a> on the top of <a href="https://cran.rstudio.com/" class="external-link">R</a> <a href="https://posit.co/download/rstudio-desktop/" class="external-link">Rstudio</a></p>
<p>Then you can paste the following to install the package:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"pak"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pak/man/pkg_install.html" class="external-link">pkg_install</a></span><span class="op">(</span><span class="st">"iom/graveler"</span><span class="op">)</span></span></code></pre>
<p>Once the package is installed on your Rstudio, follow the steps below:</p>
</div>
<div class="section level3">
<h3 id="project-creation">Project Creation<a class="anchor" aria-label="anchor" href="#project-creation"></a>
</h3>
<p>To create a {graveler} dashboard:</p>
<ol style="list-style-type: decimal">
<li><p>Click <code>New Project</code></p></li>
<li><p>Select <code>New Directory</code></p></li>
<li><p>Select <code>using IOM Shiny Dashboard Template</code></p></li>
</ol>
<p><img src="reference/figures/wizard1.png" width="389"></p>
<ol start="4" style="list-style-type: decimal">
<li>Fill out the form, ensuring that the <code>Directory Name</code> and <code>Pkg Name</code> both match and are written in camelCase (failing to do so will break your dashboard immediately)</li>
</ol>
<p><img src="reference/figures/wizard.png" width="389"></p>
<ol start="5" style="list-style-type: decimal">
<li><p>Make sure to set the proper sub directory within your computer file system</p></li>
<li><p>Click <code>Create Project</code></p></li>
</ol>
<p>This will make a new directory on your machine with the following structure:</p>
<pre><code>   .
   ├── app.R # script used to launch the app for deployment
   ├── .Rbuildignore # ignores systems files not needed for builds
   ├── .git # ignores files for git version control
   ├── _pkgdown.yml # template for documentation website
   ├── .github # folders with issue templates for bug report &amp; feature request
   ├── DESCRIPTION # where libraries are installed for your package
   ├── dev/
   │   ├── 01_dev.R # package dependencies and system file creations
   │   └──  run_dev.R # build, document, and run the shiny dashboard
   ├── inst/
   │   └── app/
   │       └── www/ # standard shiny extra file subfolder
   │           └── favicon.ico # IOM favicon
   ├── man/ # .Rd system files for functions generated by R
   └── R/
       ├── app_server.R # callModules server side here
       ├── app_ui.R # combines header, sidebar, body files
       ├── body.R # organizes UI layouts - call in modules ui side there
       ├── globals.R # specific environment variables for the project
       ├── header.R # display name and other shinydashboardPlus features
       ├── mod_home.R  # first module for your splash page
       ├── run_app.R # main function to start the shiny app
       └── sidebar.R # tabs and their icons - call in modules menu there</code></pre>
</div>
<div class="section level3">
<h3 id="initialization-of-the-app">Initialization of the app<a class="anchor" aria-label="anchor" href="#initialization-of-the-app"></a>
</h3>
<p>When you load up the new project, you will have two files open: <code>01_dev.R</code> and <code>run_dev</code>.</p>
<div class="section level4">
<h4 id="id_01_dev">01_dev<a class="anchor" aria-label="anchor" href="#id_01_dev"></a>
</h4>
<p>The first file sets up the dependencies for deployment. If you check the <code>DESCRIPTION</code> file, it will have no imports on initialization. When you run this file, it attaches all of your libraries to the package so that the server you publish to can know what to install and run.</p>
<p>These include the libraries you need to run your dashboard, a golem.config system file, an app.R file to deploy on RStudio Connect, and a manifest file to use git backed content within RStudio Connect. You can adjust these to fit your workflow.</p>
<p>At the end of the file, you will navigate to the run_dev.R file.</p>
<p><img src="reference/figures/01_dev.png"></p>
</div>
<div class="section level4">
<h4 id="run_dev">run_dev<a class="anchor" aria-label="anchor" href="#run_dev"></a>
</h4>
<p>Once your dependencies and system files are in place, you can run all code in the <code>run_dev.R</code> file.</p>
<p><img src="reference/figures/run_dev.png"></p>
<p>This should successfully run and load your (currently empty) shiny dashboard!</p>
<blockquote>
<p><strong>Note:</strong> When you run the line <code>run_dev.R</code>, you will be prompted in your console to create a golem-config.yml file. Enter 1 when prompted to create the necessary backend files required for {golem} to run your dashboard package.</p>
</blockquote>
<p>In the span of a minute you have already made a reproducible and fully functional framework!</p>
<p><img src="reference/figures/empty.png" width="502"></p>
<p>If you are familiar with building R packages, this file is the equivalent of running the <code>Install and Restart</code> option: it creates your <code>NAMESPACE</code>, documents .Rd files, and temporarily installs it locally.</p>
</div>
</div>
<div class="section level3">
<h3 id="back-office">Back office<a class="anchor" aria-label="anchor" href="#back-office"></a>
</h3>
<p>To build a robust app, it is key to separate the back-office (basically an R package which act as <em>utilities functions</em>) from the user interaction management (the ShinyApp).</p>
<div class="section level4">
<h4 id="set-up-utilities-functions-for-your-application">Set up utilities functions for your application<a class="anchor" aria-label="anchor" href="#set-up-utilities-functions-for-your-application"></a>
</h4>
<p>{golem} <a href="https://engineering-shiny.org/build-app-golem.html?q=fct#submodules-and-utility-functions" class="external-link">suggests you functionalize your code</a> by creating dedicated functions that works independently from the interface. Such utilities could include:</p>
<ul>
<li><p>connecting to an API using token (that would be stored as environment variables)</p></li>
<li><p>Data tidying and cleaning</p></li>
<li><p>Building a chart</p></li>
</ul>
<p>Using this {graveler} fork, this will be done through the creation of a dedicated {fusen} notebook where you should prefix all your function with <code>fct_</code> to distinguish from the modules that comes with <code>fct_</code>. Using {fusen} allows for quick peer review, robust documentation and easy debugging (as you can always understand if an issue arise from the interface or from the functions below it). When you create a [graveler] project, a default {fusen} notebook is created under <code>"dev/function_documentation.Rmd"</code> which comes with a series of default function with key dashboard charts.</p>
<blockquote>
<p>If you need to add a new library, simply make sure to systematically reference them within your <code>@import</code> or <code>@importFrom</code>, within your function documentation. make sure to <code><a href="https://thinkr-open.github.io/attachment/reference/att_amend_desc.html" class="external-link">attachment::att_amend_desc()</a></code> so the library are referenced in your NAMESPACE</p>
</blockquote>
<p>Your goal is to to get :</p>
<blockquote>
<p>0 errors ✔ | 0 warnings ✔ | 0 notes ✔</p>
</blockquote>
<p>Please check the examples to better understand how this works.</p>
</div>
<div class="section level4">
<h4 id="token-and-authentication">Token and authentication<a class="anchor" aria-label="anchor" href="#token-and-authentication"></a>
</h4>
<p>For evident data protection reason, it is key not to include any user name, password or authentication. The right way to do this is to use environment variables.</p>
<p>This will be the case for instance if you pull data from ActivityInfo using the <a href="https://www.activityinfo.org/support/docs/R/index.html" class="external-link">dedicaed R package</a></p>
<pre><code><span><span class="co"># set up token as environement variable - aka save within your hidden file .Renviron</span></span>
<span><span class="va">token</span> <span class="op">&lt;-</span> <span class="st">"activityinfotoken.."</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>ACTIVITYINFOTOKEN <span class="op">=</span> <span class="va">token</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"ACTIVITYINFOTOKEN"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">token</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Now we can login using this environement variable</span></span>
<span><span class="fu">activityinfo</span><span class="fu">::</span><span class="fu">activityInfoToken</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"ACTIVITYINFOTOKEN"</span><span class="op">)</span>,</span>
<span>                                prompt <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="modularization">Modularization<a class="anchor" aria-label="anchor" href="#modularization"></a>
</h3>
<p>If you are unfamiliar, modularization splits your dashboard into <em>n</em> files where <em>n</em> is the number of sidebar tabs / modules you want to make that each have their own UI and server namespaces. This allows you to independently load each module’s code (if one breaks, the rest will still work) and reuse IDs for UI elements (you can give different plotOuputs a generic name like “chart” across two different modules).</p>
<p>By default the template comes with an initial <code>home</code> module where the first tab with the home page is included.</p>
<div class="section level4">
<h4 id="creation">Creation<a class="anchor" aria-label="anchor" href="#creation"></a>
</h4>
<p>When inside a <a href="https://github.com/iom/graveler" class="external-link">graveler</a> project, running the function <code>level_up(name = "foo")</code> will add a new module - called <code>"foo"</code> - to your dashboard :</p>
<pre><code>   .
   ├── R/
   │   ├── app_server.R
   │   ├── app_ui.R
   │   ├── body.R
   │   ├── header.R
   │   ├── mod_foo.R                    &lt;&lt;&lt;&lt;&lt; HERE
   │   ├── mod_home.R
   │   ├── run_app.R
   │   └── sidebar.R
   ├── man/
   ├── inst/
   ├── dev/
   ├── DESCRIPTION
   ├── foo.Rproj
   ├── .Rbuildignore
   └── NAMESPACE</code></pre>
<p><img src="reference/figures/blank_mod.png"></p>
<p>You place your UI and server code in the <code>mod_</code> file, that reflect away repeatable data manipulation or plotting functions created through your {fusen} notebook.</p>
<p>In general, this helps keep your module code short and tidy, and allows you to put documentation for your functions just like a package.</p>
</div>
<div class="section level4">
<h4 id="connection-between-modules-and-dashboard">Connection between modules and dashboard<a class="anchor" aria-label="anchor" href="#connection-between-modules-and-dashboard"></a>
</h4>
<p><code>level_up</code> might create your module, but you still need to tell your dashboard to include and run this module. To do so, there are three lines at the bottom you copy and paste into their appropriate files: <code>body.R</code>, <code>app_server.R</code>, and <code>sidebar.R</code> (un commented, of course).</p>
<p>The body and sidebar lines need to be separated with commas if you have multiple modules, but the <code>app_server</code> will be individual lines like so:</p>
<p><img src="reference/figures/mod_copy.png"></p>
<p>Once that is done, your modules should appear on the left. All that is left to do is to insert your actual dashboard elements.</p>
</div>
<div class="section level4">
<h4 id="communication-between-modules">Communication between modules<a class="anchor" aria-label="anchor" href="#communication-between-modules"></a>
</h4>
<p>Typically communication between modules will be required if you want to use filters across modules.</p>
<p>This imply to set a specific object <code>reactivalues</code> (called per default <code>AppReactiveValue</code>) that will be consumed by all your modules.</p>
</div>
</div>
<div class="section level3">
<h3 id="customization">Customization<a class="anchor" aria-label="anchor" href="#customization"></a>
</h3>
<p>The implementation of the brand within your plots should be done with <a href="https://iom.github.io/iomthemes/" class="external-link">iomthemes</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="deployment">Deployment<a class="anchor" aria-label="anchor" href="#deployment"></a>
</h2>
<p>Once the <code>run_dev.R</code> file runs and your dashboard is error free and you are able to build a docker image, you can go for deployment.</p>
<p>Get in touch with <strong>IOM Data, Analytics &amp; AI unit</strong> to have your app published on Azure.</p>
<div class="section level3">
<h3 id="good-practices-when-publishing">Good practices when publishing<a class="anchor" aria-label="anchor" href="#good-practices-when-publishing"></a>
</h3>
<ul>
<li><p>Beware of token and password - see above on the usage of environment variable</p></li>
<li><p>Favor publication from github as much as possible. Build and publish your package documentation on github with <code><a href="https://pkgdown.r-lib.org/reference/build_site.html" class="external-link">pkgdown::build_site()</a></code></p></li>
<li><p>Share publication access rights with colleagues so that there’s a back up plan to update the app if needed</p></li>
<li><p>Once the application is published on the Posit Connect server, document the name of the github repo for your app within Rstudio Connect metadata and use a specific URL before disseminating the app</p></li>
<li><p>Do not hesitate to reach out through an <a href="">issue</a> for peer review! :)</p></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p>Please see the tutorials in the <a href="articles/learn_from_examples.html">package vignette</a>.</p>
</div>
<div class="section level2">
<h2 id="acknowledgement">Acknowledgement<a class="anchor" aria-label="anchor" href="#acknowledgement"></a>
</h2>
<p>Thanks to <a href="https://github.com/alancarlson" class="external-link">Alan Carlson</a> for the initial idea on which the package is built from. Thanks to <a href="https://github.com/ThinkR-open/" class="external-link">ThinkR</a> for the packages on which this framework is built from.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/iom/graveler/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing graveler</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Edouard Legoupil <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Edouard Legoupil.</p>
</div>

<div class="pkgdown-footer-right">
  <p><a href="https://www.iom.int/" target="_blank" rel="noopener noreferrer" class="external-link"><img src="https://raw.githubusercontent.com/iom/iomtemplate/master/man/figures/logo.svg" alt="IOM logo" style="max-height:2.5rem"></a></p>
</div>

    </footer>
</div>





  </body>
</html>
